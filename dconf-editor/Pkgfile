# Description:	Dconf Editor is a viewer and editor of applications internal settings
# URL:		https://wiki.gnome.org/Apps/DconfEditor
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	dconf gtk3 vala

name=dconf-editor
version=3.38.3
release=0
source=(https://download.gnome.org/sources/${name}/${version%.*}/${name}-${version}.tar.xz)

build() {
	cd ${name}-${version}

	build-meson . build

	meson compile ${JOBS:+-j ${JOBS}} -C build

	#meson test --no-rebuild -v -C build

	DESTDIR=$PKG meson install --no-rebuild -C build

	# clean up languages
	find $PKG/usr/share -type f -name '*.desktop' \
		-exec sed -r -e '/\[.+\]=/d' -e '/\#/d' -i {} \;

	rm -r $PKG/usr/share/{bash-completion,locale,metainfo}
}
