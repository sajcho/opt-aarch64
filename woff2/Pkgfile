# Description:	Web Open Font Format 2 reference implementation
# URL:		https://github.com/google/woff2
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	brotli cmake

name=woff2
version=1.0.2
release=0
source=(https://github.com/google/${name}/archive/v${version}/${name}-${version}.tar.gz \
	dont-set-rpath.patch \
	install-executables.patch)

build() {
	cd ${name}-${version}

	patch -p1 -i $SRC/dont-set-rpath.patch
	patch -p1 -i $SRC/install-executables.patch

	mkdir build
	cd build

	cmake .. \
		-DCMAKE_BUILD_TYPE="None" \
		-DCMAKE_INSTALL_PREFIX="/usr" \
		-DCMAKE_INSTALL_LIBDIR="/usr/lib" \
		-DCMAKE_SKIP_BUILD_RPATH=ON

	make

	make DESTDIR=$PKG PREFIX=/usr install
}
