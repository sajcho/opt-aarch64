# Description:	Library for passing menus over DBus - Glib part
# URL:		https://launchpad.net/libdbusmenu
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	glib gnome-common gobject-introspection gtk3 json-glib intltool

name=libdbusmenu-glib
_realname=libdbusmenu
version=16.04.0
release=0
source=(https://launchpad.net/${_realname}/16.04/${version}/+download/${_realname}-${version}.tar.gz)

build() {
	cd ${_realname}-${version}

	export HAVE_VALGRIND_TRUE='#'
	export HAVE_VALGRIND_FALSE=''
	export CFLAGS="$CFLAGS -Wno-error"

	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--libexecdir=/usr/lib/${name} \
		--localstatedir=/var \
		--enable-introspection \
		--disable-{dumper,gtk,nls,tests,vala}

	make -j1

	make -j1 DESTDIR=$PKG install

	rm -r $PKG/usr/{lib/libdbusmenu-glib,share/{doc,gtk-doc}}
}
