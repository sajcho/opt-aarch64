# Description:	A low-level configuration system - use dbus-elogind
# URL:		https://wiki.gnome.org/Projects/dconf
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	dbus-elogind glib vala

name=dconf-elogd
_realname=dconf
version=0.40.0
release=0
source=(https://download.gnome.org/sources/${_realname}/${version%.*}/${_realname}-${version}.tar.xz \
	systemd-userunit.patch)

build() {
	cd ${_realname}-${version}

	patch -p1 -i $SRC/systemd-userunit.patch

	build-meson \
		-Dbash_completion=false \
		-Dvapi=true \
		. build

	meson compile ${JOBS:+-j ${JOBS}} -C build

	#meson test -C build -t 100

	DESTDIR=$PKG meson install --no-rebuild -C build
}
