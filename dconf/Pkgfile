# Description:	A low-level configuration system
# URL:		https://wiki.gnome.org/Projects/dconf
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	dbus glib python3-setuptools vala

name=dconf
version=0.40.0
release=0
source=(https://download.gnome.org/sources/${name}/${version%.*}/${name}-${version}.tar.xz \
	systemd-userunit.patch)

build() {
	cd ${name}-${version}

	patch -p1 -i $SRC/systemd-userunit.patch

	build-meson \
		-Dbash_completion=false \
		-Dvapi=true \
		. build

	meson compile ${JOBS:+-j ${JOBS}} -C build

	#meson test -C build -t 100

	DESTDIR=$PKG meson install --no-rebuild -C build
}
