# Description:	Window manager designed for speed, usability and consistency
# URL:		https://github.com/ice-wm/icewm
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	asciidoc gdk-pixbuf-xlib librsvg libsndfile libxcomposite libxinerama libxpm rxvt-unicode

name=icewm
version=2.9.4
release=1
source=(https://github.com/ice-wm/${name}/archive/${version}/${name}-${version}.tar.gz)

build() {
	cd ${name}-${version}

	mkdir build
	cd build

	cmake .. -G Ninja \
		-DCMAKE_BUILD_TYPE=None \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCFGDIR=/etc \
		-DCONFIG_GDK_PIXBUF_XLIB=ON \
		-DCONFIG_IMLIB2=OFF \
		-DCONFIG_LIBRSVG=ON \
		-DCONFIG_XPM=ON \
		-DCONFIG_XFREETYPE=ON \
		-DXINERAMA=ON \
		-DENABLE_ALSA=ON \
		-DENABLE_NLS=OFF \
		-DENABLE_LTO=OFF \
		-DXTERMCMD="/usr/bin/urxvt"

	ninja -v

	DESTDIR=$PKG ninja install

	rm -r $PKG/usr/share/{doc,locale}
}
